{% extends "base.html" %}

{% block title %}Books{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Book Catalogue</h1>
</div>

{% if books %}
<div class="book-grid">
    {% for book in books %}
    <a href="{% url 'library:book_detail' book.pk %}" class="book-card">
        <div class="book-card-title">{{ book.title }}</div>
        <div class="book-card-author">{{ book.author }}</div>
        {% if book.genres.all %}
        <div class="book-card-genres">
            {% for genre in book.genres.all %}
                <span class="badge badge-genre">{{ genre.name }}</span>
            {% endfor %}
        </div>
        {% endif %}
        <div class="book-card-footer">
            {% if book.available_copies > 0 %}
                <span class="avail-indicator">
                    <span class="avail-dot green"></span>
                    <span>Available</span>
                    <span class="avail-count">({{ book.available_copies }}/{{ book.total_copies }})</span>
                </span>
            {% else %}
                <span class="avail-indicator">
                    <span class="avail-dot red"></span>
                    <span style="color:#fca5a5;">Unavailable</span>
                    <span class="avail-count">(0/{{ book.total_copies }})</span>
                </span>
            {% endif %}
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <p>No books in the catalogue yet.</p>
</div>
{% endif %}
{% endblock %}
